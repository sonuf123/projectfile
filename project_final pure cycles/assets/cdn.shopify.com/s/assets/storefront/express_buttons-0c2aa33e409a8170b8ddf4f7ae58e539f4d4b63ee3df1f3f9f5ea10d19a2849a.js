!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=(window,function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},a=function(t){return t&&t.__esModule?t:{"default":t}},u=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n};(function(){this.ScriptLoader=function(){function t(){}return t.lazyLoad=function(t,e,n){var o;return o=document.querySelector("."+e),null!=o?n():(o=document.createElement("script"),o.async=!0,o.onload=n,o.src=t,o.className=e,void document.getElementsByTagName("head")[0].appendChild(o))},t}()}).call(this),function(){var t;this.AmazonPayments={metadataTag:function(){return document.getElementById("amazon-payments-metadata")},metadata:function(t){return AmazonPayments.metadataTag().getAttribute("data-amazon-payments-"+t)},withinFlow:function(){return null!=AmazonPayments.metadataTag()},sellerId:function(){return AmazonPayments.metadata("seller-id")},language:function(){return AmazonPayments.metadata("language")},authorize:function(){var t,e;return t=AmazonPayments.metadata("callback-url"),e={popup:!1,scope:"payments:widget payments:shipping_address"},amazon.Login.authorize(e,t)}},t=function(){function t(){}return t.prototype.assign=function(t){return this.flow=this[t]},t.prototype.execute=function(t){return this.flow.call(this,t)},t.prototype.checkout=function(t){return AmazonPayments.authorize()},t.prototype.cart=function(t){var e;return e=document.createElement("input"),e.type="hidden",e.name="goto_amazon_payments",e.value="amazon_payments",t.parentElement.appendChild(e),e.form.submit()},t}(),this.amazonPaymentsButtonHandler=new t,this.AmazonPaymentsPayButton=function(){var t,e;if(AmazonPayments.withinFlow())return e=AmazonPayments.metadata("widget-library-url"),t="amazon-payments-widget-library",ScriptLoader.lazyLoad(e,t,function(){var t,e,n,o,r;for(e=document.getElementsByClassName("amazon-payments-pay-button"),r=[],n=0,o=e.length;o>n;n++)t=e[n],"true"!==t.getAttribute("data-amazon-payments-pay-button")&&(OffAmazonPayments.Button(t.id,AmazonPayments.sellerId(),{type:"PwA",size:"small",language:AmazonPayments.language(),authorization:function(){return amazonPaymentsButtonHandler.execute(t)},onError:function(t){return"undefined"!=typeof console&&null!==console?console.error(t.getErrorCode()+": "+t.getErrorMessage()):void 0}}),t.setAttribute("data-amazon-payments-pay-button","true"),r.push($(t).find("img:not(.alt-payment-list__item__logo)").addClass("alt-payment-list-amazon-button-image")));return r})}}.call(this);var s=(t(function(t,e){"use strict";window.amazonPaymentsButtonHandler.assign("cart"),window.onAmazonLoginReady=function(){amazon.Login.setSandboxMode(JSON.parse(AmazonPayments.metadata("sandbox-mode"))),amazon.Login.setClientId(AmazonPayments.metadata("client-id")),amazon.Login.setRegion(AmazonPayments.metadata("region")),amazon.Login.setUseCookie(!0),AmazonPaymentsPayButton()}}),t(function(t,e){"use strict";function n(t){var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","clear_cart"),e.setAttribute("value","true"),t.appendChild(e);var n=t.elements.quantity,o=t.elements.id,r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","updates["+o.value+"]"),r.setAttribute("value",n?n.value:1),t.appendChild(r),t.setAttribute("action","/checkout"),window.ShopifyAnalytics.lib.track("Buy Now Button"),t.submit()}function o(){var t=document.getElementById("buy-now-button--checkout");if(t){for(var e=void 0,o=document.forms,r=0;r<o.length;r++)if(document.forms[r].action&&-1!==o[r].action.indexOf("cart/add")){e=o[r];break}e&&e.elements.id&&(t.style.display="inline-block",t.onclick=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.preventDefault(),n(e)})}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o,window.Shopify=window.Shopify||{},Shopify.StorefrontExpressButtons=Shopify.StorefrontExpressButtons||{},Shopify.StorefrontExpressButtons.ExpressCheckout={initialize:o}}),t(function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)})),c=t(function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}}),l=t(function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}}),f=t(function(t,e){t.exports=!l(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),p=t(function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),h=t(function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}}),d=t(function(t,e){t.exports=function(t){if(!h(t))throw TypeError(t+" is not an object!");return t}}),m=t(function(t,e){var n=s.document,o=h(n)&&h(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}}),y=t(function(t,e){t.exports=!f&&!l(function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a})}),v=t(function(t,e){t.exports=function(t,e){if(!h(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!h(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!h(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!h(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}}),g=t(function(t,e){var n=Object.defineProperty;e.f=f?Object.defineProperty:function(t,e,o){if(d(t),e=v(e,!0),d(o),y)try{return n(t,e,o)}catch(r){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(t[e]=o.value),t}}),_=t(function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}}),b=t(function(t,e){t.exports=f?function(t,e,n){return g.f(t,e,_(1,n))}:function(t,e,n){return t[e]=n,t}}),S=t(function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}}),k=t(function(t,e){var n=S("src"),o="toString",r=Function[o],i=(""+r).split(o);p.inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,o,r){var a="function"==typeof o;a&&(c(o,"name")||b(o,"name",e)),t[e]!==o&&(a&&(c(o,n)||b(o,n,t[e]?""+t[e]:i.join(String(e)))),t===s?t[e]=o:r?t[e]?t[e]=o:b(t,e,o):(delete t[e],b(t,e,o)))})(Function.prototype,o,function(){return"function"==typeof this&&this[n]||r.call(this)})}),P=t(function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}}),A=t(function(t,e){t.exports=function(t,e,n){if(P(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}}),w=t(function(t,e){var n="prototype",o=function(t,e,r){var i,a,u,c,l=t&o.F,f=t&o.G,h=t&o.S,d=t&o.P,m=t&o.B,y=f?s:h?s[e]||(s[e]={}):(s[e]||{})[n],v=f?p:p[e]||(p[e]={}),g=v[n]||(v[n]={});f&&(r=e);for(i in r)a=!l&&y&&void 0!==y[i],u=(a?y:r)[i],c=m&&a?A(u,s):d&&"function"==typeof u?A(Function.call,u):u,y&&k(y,i,u,t&o.U),v[i]!=u&&b(v,i,c),d&&g[i]!=u&&(g[i]=u)};s.core=p,o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t.exports=o}),E=t(function(t,e){var n=S("meta"),o=g.f,r=0,i=Object.isExtensible||function(){return!0},a=!l(function(){return i(Object.preventExtensions({}))}),u=function(t){o(t,n,{value:{i:"O"+ ++r,w:{}}})},s=function(t,e){if(!h(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,n)){if(!i(t))return"F";if(!e)return"E";u(t)}return t[n].i},f=function(t,e){if(!c(t,n)){if(!i(t))return!0;if(!e)return!1;u(t)}return t[n].w},p=function(t){return a&&d.NEED&&i(t)&&!c(t,n)&&u(t),t},d=t.exports={KEY:n,NEED:!1,fastKey:s,getWeak:f,onFreeze:p}}),O=t(function(t,e){var n="__core-js_shared__",o=s[n]||(s[n]={});t.exports=function(t){return o[t]||(o[t]={})}}),C=t(function(t,e){var n=O("wks"),o=s.Symbol,r="function"==typeof o,i=t.exports=function(t){return n[t]||(n[t]=r&&o[t]||(r?o:S)("Symbol."+t))};i.store=n}),x=t(function(t,e){var n=g.f,o=C("toStringTag");t.exports=function(t,e,r){t&&!c(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}}),T=t(function(t,e){e.f=C}),j=t(function(t,e){t.exports=!1}),I=t(function(t,e){var n=g.f;t.exports=function(t){var e=p.Symbol||(p.Symbol=j?{}:s.Symbol||{});"_"==t.charAt(0)||t in e||n(e,t,{value:T.f(t)})}}),N=t(function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}}),M=t(function(t,e){t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==N(t)?t.split(""):Object(t)}}),z=t(function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}}),D=t(function(t,e){t.exports=function(t){return M(z(t))}}),F=t(function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}}),L=t(function(t,e){var n=Math.min;t.exports=function(t){return t>0?n(F(t),9007199254740991):0}}),R=t(function(t,e){var n=Math.max,o=Math.min;t.exports=function(t,e){return t=F(t),0>t?n(t+e,0):o(t,e)}}),U=t(function(t,e){t.exports=function(t){return function(e,n,o){var r,i=D(e),a=L(i.length),u=R(o,a);if(t&&n!=n){for(;a>u;)if(r=i[u++],r!=r)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}}}),H=t(function(t,e){var n=O("keys");t.exports=function(t){return n[t]||(n[t]=S(t))}}),q=t(function(t,e){var n=U(!1),o=H("IE_PROTO");t.exports=function(t,e){var r,i=D(t),a=0,u=[];for(r in i)r!=o&&c(i,r)&&u.push(r);for(;e.length>a;)c(i,r=e[a++])&&(~n(u,r)||u.push(r));return u}}),B=t(function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),G=t(function(t,e){t.exports=Object.keys||function(t){return q(t,B)}}),W=t(function(t,e){t.exports=function(t,e){for(var n,o=D(t),r=G(o),i=r.length,a=0;i>a;)if(o[n=r[a++]]===e)return n}}),V=t(function(t,e){e.f=Object.getOwnPropertySymbols}),J=t(function(t,e){e.f={}.propertyIsEnumerable}),Q=t(function(t,e){t.exports=function(t){var e=G(t),n=V.f;if(n)for(var o,r=n(t),i=J.f,a=0;r.length>a;)i.call(t,o=r[a++])&&e.push(o);return e}}),K=t(function(t,e){t.exports=Array.isArray||function(t){return"Array"==N(t)}}),X=t(function(t,e){t.exports=f?Object.defineProperties:function(t,e){d(t);for(var n,o=G(e),r=o.length,i=0;r>i;)g.f(t,n=o[i++],e[n]);return t}}),Y=t(function(t,e){t.exports=s.document&&document.documentElement}),Z=t(function(t,e){var n=H("IE_PROTO"),o=function(){},r="prototype",i=function(){var t,e=m("iframe"),n=B.length,o=">";for(e.style.display="none",Y.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+o),t.close(),i=t.F;n--;)delete i[r][B[n]];return i()};t.exports=Object.create||function(t,e){var a;return null!==t?(o[r]=d(t),a=new o,o[r]=null,a[n]=t):a=i(),void 0===e?a:X(a,e)}}),tt=t(function(t,e){var n=B.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return q(t,n)}}),et=t(function(t,e){var n=tt.f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(t){try{return n(t)}catch(e){return r.slice()}};t.exports.f=function(t){return r&&"[object Window]"==o.call(t)?i(t):n(D(t))}}),nt=t(function(t,e){var n=Object.getOwnPropertyDescriptor;e.f=f?n:function(t,e){if(t=D(t),e=v(e,!0),y)try{return n(t,e)}catch(o){}return c(t,e)?_(!J.f.call(t,e),t[e]):void 0}}),ot=(t(function(t,e){"use strict";var n=E.KEY,o=nt.f,r=g.f,i=et.f,a=s.Symbol,u=s.JSON,p=u&&u.stringify,h="prototype",m=C("_hidden"),y=C("toPrimitive"),P={}.propertyIsEnumerable,A=O("symbol-registry"),N=O("symbols"),M=O("op-symbols"),z=Object[h],F="function"==typeof a,L=s.QObject,R=!L||!L[h]||!L[h].findChild,U=f&&l(function(){return 7!=Z(r({},"a",{get:function(){return r(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=o(z,e);i&&delete z[e],r(t,e,n),i&&t!==z&&r(z,e,i)}:r,H=function(t){var e=N[t]=Z(a[h]);return e._k=t,e},q=F&&"symbol"==typeof a.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof a},B=function(t,e,n){return t===z&&B(M,e,n),d(t),e=v(e,!0),d(n),c(N,e)?(n.enumerable?(c(t,m)&&t[m][e]&&(t[m][e]=!1),n=Z(n,{enumerable:_(0,!1)})):(c(t,m)||r(t,m,_(1,{})),t[m][e]=!0),U(t,e,n)):r(t,e,n)},X=function(t,e){d(t);for(var n,o=Q(e=D(e)),r=0,i=o.length;i>r;)B(t,n=o[r++],e[n]);return t},Y=function(t,e){return void 0===e?Z(t):X(Z(t),e)},$=function(t){var e=P.call(this,t=v(t,!0));return this===z&&c(N,t)&&!c(M,t)?!1:e||!c(this,t)||!c(N,t)||c(this,m)&&this[m][t]?e:!0},ot=function(t,e){if(t=D(t),e=v(e,!0),t!==z||!c(N,e)||c(M,e)){var n=o(t,e);return!n||!c(N,e)||c(t,m)&&t[m][e]||(n.enumerable=!0),n}},rt=function(t){for(var e,o=i(D(t)),r=[],a=0;o.length>a;)c(N,e=o[a++])||e==m||e==n||r.push(e);return r},it=function(t){for(var e,n=t===z,o=i(n?M:D(t)),r=[],a=0;o.length>a;)c(N,e=o[a++])&&(n?c(z,e):!0)&&r.push(N[e]);return r};F||(a=function(){if(this instanceof a)throw TypeError("Symbol is not a constructor!");var t=S(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(M,n),c(this,m)&&c(this[m],t)&&(this[m][t]=!1),U(this,t,_(1,n))};return f&&R&&U(z,t,{configurable:!0,set:e}),H(t)},k(a[h],"toString",function(){return this._k}),nt.f=ot,g.f=B,tt.f=et.f=rt,J.f=$,V.f=it,f&&!j&&k(z,"propertyIsEnumerable",$,!0),T.f=function(t){return H(C(t))}),w(w.G+w.W+w.F*!F,{Symbol:a});for(var at="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ut=0;at.length>ut;)C(at[ut++]);for(var at=G(C.store),ut=0;at.length>ut;)I(at[ut++]);w(w.S+w.F*!F,"Symbol",{"for":function(t){return c(A,t+="")?A[t]:A[t]=a(t)},keyFor:function(t){if(q(t))return W(A,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){R=!0},useSimple:function(){R=!1}}),w(w.S+w.F*!F,"Object",{create:Y,defineProperty:B,defineProperties:X,getOwnPropertyDescriptor:ot,getOwnPropertyNames:rt,getOwnPropertySymbols:it}),u&&w(w.S+w.F*(!F||l(function(){var t=a();return"[null]"!=p([t])||"{}"!=p({a:t})||"{}"!=p(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,n,o=[t],r=1;arguments.length>r;)o.push(arguments[r++]);return e=o[1],"function"==typeof e&&(n=e),(n||!K(e))&&(e=function(t,e){return n&&(e=n.call(this,t,e)),q(e)?void 0:e}),o[1]=e,p.apply(u,o)}}}),a[h][y]||b(a[h],y,a[h].valueOf),x(a,"Symbol"),x(Math,"Math",!0),x(s.JSON,"JSON",!0)}),t(function(t,e){var n=C("toStringTag"),o="Arguments"==N(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=r(e=Object(t),n))?i:o?N(e):"Object"==(a=N(e))&&"function"==typeof e.callee?"Arguments":a}})),rt=(t(function(t,e){"use strict";var n={};n[C("toStringTag")]="z",n+""!="[object z]"&&k(Object.prototype,"toString",function(){return"[object "+ot(this)+"]"},!0)}),t(function(t,e){t.exports=p.Symbol}),t(function(t,e){"use strict";function n(t){"loading"!==document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"loading"!==document.readyState&&t()})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n})),it=t(function(t,e){"use strict";function n(t){var e={city:t.locality,province_code:t.administrativeArea,zip:t.postalCode};t.countryCode?e.country_code=t.countryCode.toLowerCase():t.country&&(e.country=t.country.toLowerCase(),"usa"===e.country&&(e.country="united states")),t.givenName&&(e.first_name=t.givenName),t.familyName&&(e.last_name=t.familyName),t.phoneNumber&&(e.phone=t.phoneNumber);var n=t.addressLines;return n&&n.length&&(e.address1=n[0],n[1]&&(e.address2=n[1])),u(e)}function o(t,e){return{type:"final",label:e,amount:t.total_price}}function r(t){var e=[{type:"final",label:"Subtotal",amount:l(t)}];return t.shipping_line&&(e=e.concat([{type:"final",label:"Shipping",amount:t.shipping_line.price}])),t.total_tax&&(e=e.concat([{type:"final",label:"Estimated Tax",amount:t.total_tax}])),t.applied_discount&&(e=e.concat([{type:"final",label:"Discount",amount:-t.applied_discount.amount}])),e}function i(t){return a(t).map(c)}function a(t){return[].concat(t).sort(s)}function u(t){var e=t.country_code,n=t.country,o=t.zip,r={};return f.test(o)&&(("ca"===e||"canada"===n)&&(r.zip=o.trim()+" 0Z0"),"gb"===e&&(r.zip=o.trim()+" 0ZZ")),Object.assign({},t,r)}function s(t,e){var n=parseFloat(t.price),o=parseFloat(e.price);return o>n?-1:n>o?1:0}function c(t){return{identifier:t.id,label:t.title,detail:"",amount:t.price}}function l(t){return(t.line_items||[]).reduce(function(t,e){return t+e.quantity*e.price},0)}Object.defineProperty(e,"__esModule",{value:!0}),e.addressFromEvent=n,e.totalFromCheckout=o,e.lineItemsFromCheckout=r,e.transformedShippingRates=i,e.sortShippingRates=a;var f=/^[a-z0-9]{2,4}\s?$/i}),at=t(function(t,o){"use strict";function r(){var t=new Uint8Array(32);return window.crypto.getRandomValues(t),t.map(function(t){return t.toString(16)}).join("")}function i(t){return t.response&&422===t.response.status?ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS:ApplePaySession.STATUS_FAILURE}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.checkout||t;return e.billing_address?ApplePaySession.STATUS_INVALID_BILLING_POSTAL_ADDRESS:e.shipping_address?ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS:ApplePaySession.STATUS_FAILURE}Object.defineProperty(o,"__esModule",{value:!0});var u=function(){function t(e){var o=e.apiClient,i=e.sessionToken,a=e.merchantName,u=e.session,s=e.strategy,c=e.shopId;if(n(this,t),this.apiClient=o,this.strategy=s,this._sessionToken=i||r(),this._merchantName=a,this._session=u,this._shopId=c,!s)throw new Error("`strategy` must be supplied to ShopifyApplePaySession");this._session.oncancel=this._trackCallback("cancelled",this._onCancel).bind(this),this._session.onvalidatemerchant=this._trackCallback("merchant validated",this._onValidateMerchant.bind(this)),this._session.onshippingcontactselected=this._trackCallback("shipping contact selected",this._onShippingContactSelected).bind(this),this._session.onshippingmethodselected=this._trackCallback("shipping method selected",this._onShippingMethodSelected).bind(this),this._session.onpaymentauthorized=this._trackCallback("payment authorized",this._onPaymentAuthorized).bind(this),this._session.onpaymentmethodselected=this._trackCallback("payment method selected",this._onPaymentMethodSelected).bind(this)}return e(t,[{key:"begin",value:function(){this._session.begin()}},{key:"_onCancel",value:function(){return this.apiClient.stopPolling(),Promise.resolve()}},{key:"_onValidateMerchant",value:function(t){var e=this,n=t.validationURL,o={domain:window.location.hostname,id:this._sessionToken,validation_url:n};return this.strategy.build().then(function(t){return e.checkout=t}).then(function(){return e.apiClient.post("/"+e._shopId+"/apple_pay/sessions",o)}).then(function(t){var n=t.body;return e._session.completeMerchantValidation(n)})["catch"](function(){return e._session.abort()})}},{key:"_onShippingContactSelected",value:function(t){var e=this,n={partial_addresses:!0,shipping_address:it.addressFromEvent(t.shippingContact)};return this._updateCheckout(n).then(this._fetchShippingRates.bind(this)).then(this._setDefaultShippingRate.bind(this)).then(function(t){return e._session.completeShippingContactSelection(ApplePaySession.STATUS_SUCCESS,it.transformedShippingRates(e.availableShippingRates),it.totalFromCheckout(t,e._merchantName),it.lineItemsFromCheckout(t))})["catch"](function(t){return e._session.completeShippingContactSelection(i(t),[],it.totalFromCheckout(e.checkout,e._merchantName),it.lineItemsFromCheckout(e.checkout))})}},{key:"_onShippingMethodSelected",value:function(t){var e=this,n=t.shippingMethod,o={shipping_line:{handle:n.identifier}};return this._updateCheckout(o).then(function(t){return e._session.completeShippingMethodSelection(ApplePaySession.STATUS_SUCCESS,it.totalFromCheckout(t,e._merchantName),it.lineItemsFromCheckout(t))})["catch"](function(){return e._session.completeShippingMethodSelection(ApplePaySession.STATUS_FAILURE)})}},{key:"_onPaymentAuthorized",value:function(t){var e=t.payment,n=e.token.paymentData,o={email:e.billingContact.emailAddress||e.shippingContact.emailAddress,billing_address:it.addressFromEvent(e.billingContact),shipping_address:it.addressFromEvent(e.shippingContact)};if(this.checkout.requires_shipping!==!1&&!this.checkout.shipping_line)return this._session.completePayment(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS);var i={unique_token:r(),amount:this.checkout.total_price,payment_token:{type:"apple_pay",payment_data:JSON.stringify(n)}};return this._updateCheckout(o).then(this._submitPayment.bind(this,i)).then(this._completePayment.bind(this))["catch"](this._handlePaymentError.bind(this))}},{key:"_onPaymentMethodSelected",value:function(){return this._session.completePaymentMethodSelection(it.totalFromCheckout(this.checkout,this._merchantName),it.lineItemsFromCheckout(this.checkout)),Promise.resolve()}},{key:"_fetchShippingRates",value:function(){var t=this;return this.checkout.requires_shipping===!1?(this.availableShippingRates=[],this.checkout):this.apiClient.get("/api/checkouts/"+this.checkout.token+"/shipping_rates").then(function(e){var n=e.shipping_rates;return t.availableShippingRates=it.sortShippingRates(n),t.checkout})}},{key:"_setDefaultShippingRate",value:function(){if(this.checkout.requires_shipping===!1||this.checkout.shipping_line)return this.checkout;var t=this.availableShippingRates||[],e=t[0];return e?this._updateCheckout({shipping_line:{handle:e.id}}):this.checkout}},{key:"_getCheckout",value:function(){var t=this;return this.apiClient.get("/api/checkouts/"+this.checkout.token).then(function(e){return t.checkout=e.checkout})}},{key:"_updateCheckout",value:function(t){var e=this;return this.apiClient.patch("/api/checkouts/"+this.checkout.token,{checkout:t}).then(function(t){return e.checkout=t.checkout})}},{key:"_submitPayment",value:function(t){return this.apiClient.post("/api/checkouts/"+this.checkout.token+"/payments",{payment:t})}},{key:"_completePayment",value:function(t){var e=this,n=t.payment,o=n&&n.transaction,r=void 0;return o&&"success"!==o.status&&"pending"!==o.status?r=o.message||"Payment Transaction "+o.status:n&&n.payment_processing_error_message&&(r=n.payment_processing_error_message),r?(this._session.completePayment(ApplePaySession.STATUS_FAILURE),t):this._getCheckout().then(function(n){var o=n.order;return e._session.completePayment(ApplePaySession.STATUS_SUCCESS),e._redirect(o.status_url),t})}},{key:"_handlePaymentError",value:function(t){var e=this;t&&t.response&&422===t.response.status?t.response.json().then(function(t){var e=t.errors;return a(e)}).then(function(t){return e._session.completePayment(t)})["catch"](function(){return e._session.completePayment(ApplePaySession.STATUS_FAILURE)}):this._session.completePayment(ApplePaySession.STATUS_FAILURE)}},{key:"_trackCallback",value:function(t,e){var n=this;return function(o){return e.call(n,o).then(function(){return n._track(t)})["catch"](function(t){throw t})}}},{key:"_track",value:function(t){window.ShopifyAnalytics&&ShopifyAnalytics.lib&&ShopifyAnalytics.lib.track&&ShopifyAnalytics.lib.track("Apple Pay slate - "+t,{checkoutToken:this.checkout&&this.checkout.token})}},{key:"_redirect",value:function(t){window.location=t}}]),t}();o["default"]=u}),ut=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(t){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.response=t,o.stack=(new Error).stack,o.name=o.constructor.name,o}return o(e,t),e}(Error);e["default"]=i}),st=t(function(t,o){"use strict";function r(t){return t?JSON.parse(t):null}function a(t,e){var n=i({method:"GET"},e);return new Promise(function(e,o){var r=new XMLHttpRequest;r.open(n.method,t,!0),Object.keys(n.headers).forEach(function(t){r.setRequestHeader(t,n.headers[t])}),r.onload=function(){var t="response"in r?r.response:r.responseText;e(new s(t,r.status,r.getAllResponseHeaders()))},r.onerror=r.ontimeout=o,r.send(n.body)})}Object.defineProperty(o,"__esModule",{value:!0}),o["default"]=a;var u=function(){function t(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t),this._headers={};var r=o.trim().split("\n");r.forEach(function(t){var n=t.trim().split(":"),o=n.shift().trim(),r=n.join(":").trim();e._headers[o]=r})}return e(t,[{key:"get",value:function(t){return this._headers[t]}}]),t}(),s=function(){function t(e,o,r){n(this,t),this.body=e,this.status=o,this.headers=new u(r),this.ok=o>=200&&300>o}return e(t,[{key:"text",value:function(){return Promise.resolve(this.body)}},{key:"json",value:function(){return this.text().then(r)}}]),t}()}),ct=t(function(t,o){"use strict";function r(t,e){var n=this,o=i({poll:!0,timeout:2e4},t),r=o.poll,a=o.timeout;if(!r||202!==e.status)return e;var u={method:"GET",headers:this.headers};return new Promise(function(t,o){n._pollExpiryTimeout=setTimeout(function(){clearTimeout(n._pollScheduleTimeout),o(new Error("API request polling timed out. Exceeded maximum timeout of "+a+"ms"))},a),function r(e){var n=this;202===e.status?!function(){var t=e.headers.get("Location"),i=1e3*(Number(e.headers.get("Retry-After"))||1);n._pollScheduleTimeout=setTimeout(function(){l["default"](t,u).then(r.bind(n))["catch"](o)},i)}():(clearTimeout(this._pollExpiryTimeout),t(e))}.call(n,e)})}function u(t){return 204===t.status||202===t.status?t:t.ok?t.json():Promise.reject(new c["default"](t))}function s(t){return btoa(t+":")}Object.defineProperty(o,"__esModule",{value:!0});var c=a(ut),l=a(st),f=function(){function t(e){var o=e.accessToken,r=e.host;n(this,t),this.host=r,this.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Basic "+s(o),"X-Shopify-Checkout-Version":"2016-09-06"}}return e(t,[{key:"get",value:function(t,e){return this.request("GET",t,null,e)}},{key:"post",value:function(t,e,n){return this.request("POST",t,e,n)}},{key:"patch",value:function(t,e,n){return this.request("PATCH",t,e,n)}},{key:"put",value:function(t,e,n){return this.request("PUT",t,e,n)}},{key:"stopPolling",value:function(){clearTimeout(this._pollExpiryTimeout),clearTimeout(this._pollScheduleTimeout)}},{key:"request",value:function(t,e,n,o){var i={method:t,headers:this.headers,body:n?JSON.stringify(n):null};return"/"===e[0]&&this.host&&(e="https://"+this.host+e),l["default"](e,i).then(r.bind(this,o)).then(u)}}]),t}();o["default"]=f}),lt=t(function(t,e){"use strict";function n(t){var e=t.buttons,n=t.apiHost,i=t.requireActiveCard,a=u(t,["buttons","apiHost","requireActiveCard"]);if(!e||!e.length)return Promise.reject(new Error("No Apple Pay buttons provided"));var c=document.querySelector("meta[name=shopify-checkout-api-token]"),f=document.getElementById("apple-pay-shop-capabilities");if(!c)return Promise.reject(new Error("Missing public access token for Apple Pay"));if(!f)return Promise.reject(new Error("Missing shop capabilities for Apple Pay"));var p=JSON.parse(f.textContent),h=p.merchantId,d=p.shopId,m=u(p,["merchantId","shopId"]);return o(h,i).then(function(t){if(t){a.merchantName=m.merchantName,a.shopId=d;var o=c.getAttribute("content"),i=new l["default"]({accessToken:o,host:n});a.apiClient=i,a.strategy.setApiClient(i);for(var u=0;u<e.length;++u){var f=e[u];f.style.display=f.getAttribute("data-display-value")||"inline-block",f.addEventListener("click",r.bind(null,m,a))}s("shown")}return t})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;if(!window.ApplePaySession)return Promise.resolve(!1);var n=ApplePaySession.canMakePaymentsWithActiveCard(t).then(function(t){return s("canMakePaymentsWithActiveCard: "+t),t});return e?n:Promise.resolve(ApplePaySession.canMakePayments())}function r(t,e,n){n.preventDefault(),s("clicked"),e.session=new ApplePaySession(f,i(t)),new c["default"](e).begin()}function i(t){var e=t.merchantName,n=u(t,["merchantName"]);return n.total={type:"pending",label:e,amount:"1.00"},n}function s(t){window.ShopifyAnalytics&&ShopifyAnalytics.lib&&ShopifyAnalytics.lib.track&&ShopifyAnalytics.lib.track("Apple Pay button - "+t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var c=a(at),l=a(ct),f=1}),ft=t(function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.apiClient;n(this,t),this.gatewayParams={type:"apple_pay_web"},this.setApiClient(o)}return e(t,[{key:"setApiClient",value:function(t){this.apiClient=t}},{key:"getCheckout",value:function(t){return this.apiClient.patch("/api/checkouts/"+t,this.params()).then(function(t){var e=t.checkout;return e})}},{key:"createCheckout",value:function(t){return this.apiClient.post("/api/checkouts",this.params(t)).then(function(t){var e=t.checkout;return e})}},{key:"params",value:function(t){return{checkout:i({},t,{gateway_params:this.gatewayParams})}}}]),t}();o["default"]=r}),pt=t(function(t,i){"use strict";function u(){var t=document.querySelector('form[action^="/cart/add"]');if(!t)return{};var e=t.elements.quantity,n=e?e.value:1;return{line_items:[{variant_id:t.elements.id.value,quantity:n}]}}Object.defineProperty(i,"__esModule",{value:!0});var s=a(ft),c=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"build",value:function(){return this.createCheckout(u())}}]),i}(s["default"]);i["default"]=c}),ht=t(function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=a(ft),s=a(st),c=/^(https?:\/\/[^\/]+)?\/checkout\/poll/,l=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return o(i,t),e(i,[{key:"build",value:function(){var t=this;return this.updateCart().then(function(e){var n=e.token;return t.createCheckout({cart_token:n})})}},{key:"createCheckout",value:function(t){return this.apiClient.post("/api/checkouts",this.params(t),{poll:!1}).then(this.handleThrottling.bind(this)).then(function(t){var e=t.checkout;return e})}},{key:"handleThrottling",value:function(t){if(202===t.status&&t.headers){var e=t.headers.get("Location");return c.test(e)?(this.redirectToQueue(),Promise.reject()):this.apiClient.get(e)}return t}},{key:"updateCart",value:function(){return s["default"]("/cart",{method:"POST",body:new FormData(this.form),headers:{Accept:"application/json"},credentials:"same-origin"}).then(function(t){return t.json()})}},{key:"redirectToQueue",value:function(){var t=document.createElement("input");t.type="hidden",t.name="checkout",t.value="1",this.form.appendChild(t),this.form.submit()}},{key:"form",get:function(){return this._form?this._form:(this._form=document.querySelector('form[action^="/cart"]'),this._form)}}]),i}(u["default"]);i["default"]=l}),dt=t(function(t,e){"use strict";function n(){if(window.ApplePaySession){var t=document.querySelectorAll('.additional-checkout-button--apple-pay[data-strategy="product"]');t&&t.length&&o["default"]({buttons:t,strategy:new r["default"],requireActiveCard:!0});var e=document.querySelectorAll('.additional-checkout-button--apple-pay[data-strategy="cart"]');e&&e.length&&o["default"]({buttons:e,strategy:new i["default"]})}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var o=a(lt),r=a(pt),i=a(ht)}),mt=t(function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=Symbol("targetSymbol"),i=Symbol("actionQueueSymbol"),a=Symbol("finishedLoadingSymbol"),u=function(){function t(e){var o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;n(this,t),this[i]=[],this[a]=!1,u?!function(){var t=e.onload;e.onload=function(){
t&&t(),o[r]=e,o[a]=!0,o[i].forEach(function(t){return t()})}}():(this[r]=e,this[a]=!0)}return e(t,[{key:"postMessage",value:function(t){var e=this,n=function(){t.digitalWalletsDialog=!0,e[r].postMessage(t,e[r].location)};this[a]?n():this[i].push(function(){n()})}}]),t}();o["default"]=u}),yt=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.EVENTS_PREFIX="DigitalWalletsDialog";e.DIALOG_CHANGE=n+":change",e.DIALOG_CHANGED=n+":changed",e.DIALOG_DISMISSED=n+":dismissed",e.IFRAME_SHOWN=n+":iframe_shown",e.IFRAME_HIDDEN=n+":iframe_hidden",e.SERVICES_ENDPOINT="/services/digital_wallets/dialog",e.HTML_ESCAPED_CHARACTERS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}}),vt=t(function(t,o){"use strict";function r(t){t[h]=new f["default"](t[p].contentWindow,!0)}function i(t){t[p]=document.createElement("iframe"),t[p].src=yt.SERVICES_ENDPOINT,t[p].style.position="fixed",t[p].style.top=0,t[p].style.left=0,t[p].style.zIndex=99999,t[p].style.height=0,t[p].style.width=0,t[p].style.border=0,t[p].scrolling="no",document.body.appendChild(t[p])}function u(t,e){switch(e.data.type){case yt.DIALOG_CHANGED:y=window.pageYOffset,s(t[p],!0),c(!0),l(t,yt.IFRAME_SHOWN),t[h].postMessage({type:yt.IFRAME_SHOWN});break;case yt.DIALOG_DISMISSED:s(t[p],!1),c(!1,y),l(t,yt.IFRAME_HIDDEN);break;default:return}}function s(t,e){var n=e?"100%":"0";t.style.height=n,t.style.width=n}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;document.documentElement.style.overflow=t?"hidden":"visible",document.documentElement.style.height=t?"100%":"auto",document.body.style.overflow=t?"hidden":"visible",document.body.style.height=t?"100%":"auto",window.scrollTo(0,e)}function l(t,e){if(-1!==d.indexOf(e)){var n=new Event(e);t[p].dispatchEvent(n)}}Object.defineProperty(o,"__esModule",{value:!0});var f=a(mt),p=Symbol("iframeSymbol"),h=Symbol("messengerSymbol"),d=[yt.IFRAME_SHOWN,yt.IFRAME_HIDDEN],m=void 0,y=void 0,v=function(){function t(){var e=this;return n(this,t),m||(m=this,i(this),r(this),this._messageHandler=function(t){t.data&&t.data.type&&t.data.digitalWalletsDialog&&u(e,t)},window.addEventListener("message",this._messageHandler)),m}return e(t,[{key:"showMessage",value:function(t){return this[h].postMessage({payload:t,type:yt.DIALOG_CHANGE})}},{key:"destroy",value:function(){null!==this[p]&&this[p].remove(),m=null,this[p]=null,this[h]=null,window.removeEventListener("message",this._messageHandler),c(!1)}}]),t}();o["default"]=v});t(function(t,e){"use strict";var n=a(rt),o=a(dt),r=a(vt);Shopify.StorefrontExpressButtons.initialize=function(){o["default"](),AmazonPaymentsPayButton(),Shopify.StorefrontExpressButtons.ExpressCheckout.initialize(),window.ShopifyExperiments&&window.ShopifyExperiments.digitalWallet&&(Shopify.StorefrontExpressButtons.DigitalWalletsDialog||(Shopify.StorefrontExpressButtons.DigitalWalletsDialog=new r["default"]))},n["default"](Shopify.StorefrontExpressButtons.initialize)})}();